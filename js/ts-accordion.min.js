(function(a){a.fn.tsAccordion=function(b){var c=a.extend({transition:"simple",multiOpen:false,startOpen:false},b);return this.each(function(){var d={container:this,settings:c,panels:a(this).find("[data-ui='accordion-panel']"),handles:a(this).find("[data-ui='accordion-handle']")};var g=function(){var h={};(function(){h.tranOut=function(i,j){(function(k,l){a(k.outgoing).animate({height:a(k.outgoing).find("[data-ui='accordion-handle']").outerHeight()},300,function(){if(typeof l==="function"){l(k)}})})(i,j)};h.tranIn=function(p){var n=0,m=a(p.incoming).children(),j=m.length,k=0;for(n=0;n<j;n+=1){k+=a(m[n]).outerHeight(true)}a(p.incoming).animate({height:k},300)};h.init=function(m){var k=0,j=m.panels.length;if(d.settings.startOpen){for(k=0;k<j;k+=1){m.incoming=m.panels[k];h.tranIn(m);a(m.panels[k]).addClass("current")}}else{for(k=0;k<j;k+=1){a(m.panels[k]).css({height:a(m.panels[k]).find("[data-ui='accordion-handle']").outerHeight()})}}}})();return h};var e=function(h){var i={};(function(){i.change=function(j){var k={};k.incoming=j[0];if(a(k.incoming).hasClass("current")){k.outgoing=j[0];a(k.incoming).removeClass("current");h.tranOut(k)}else{if(d.settings.multiOpen){a(k.incoming).addClass("current");h.tranIn(k)}else{k.outgoing=a(d.container).find("[data-ui='accordion-panel'].current")[0];a(d.panels).removeClass("current");a(k.incoming).addClass("current");h.tranOut(k,h.tranIn);if(!k.outgoing){h.tranIn(k)}}}}})();return i};var f=function(i){var h={};(function(){h.handles=function(){var k=0,j=d.handles.length;for(k=0;k<j;k+=1){a(d.handles[k]).bind("click",function(l){l.preventDefault();i.change(a(this).closest("[data-ui='accordion-panel']"))})}}})();return h};(function(){var i=g(d);var j=e(i);var h=f(j);i.init(d);h.handles()})()})}})(jQuery);